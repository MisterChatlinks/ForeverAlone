class _Fo_EventManager{static listener={};static on(e,t){this.listener[e]||(this.listener[e]=[]),this.listener[e].includes(t)||this.listener[e].push(t)}static once(e,t){this.listener[e]||(this.listener[e]=[]);let r=o=>{let n=this.listener[e].indexOf(r);this.listener[e]=this.listener[e].splice(n,1),t(...o)};this.listener[e].includes(t)||this.listener[e].push(r)}static off(e,t){if(_Fo_AppManager.listener[e]){let r=_Fo_AppManager.listener[e].indexOf(t);-1!==r&&_Fo_AppManager.listener[e].splice(r,1)}}static emit(e,...t){_Fo_AppManager.listener[e]&&_Fo_AppManager.listener[e].forEach(e=>e(...t))}}class _Fo_UtilityFunc extends _Fo_EventManager{constructor(){super()}static customEvent=({selector:e,event:t,data:r=null})=>{let o=document.querySelectorAll(e);1==o.length?o[0].dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0})):o.length>1?o.forEach(e=>{e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0}))}):console.log(`foreveralone.customEvent log, element with selector ${e} not found`)};static dfs=({node:e,predicates:t})=>{let r=Array.isArray(e)?[...e]:[e],o=!0;for(;r.length>0;){let n=r.pop();console.log(`foreveralone.dfs log, node current explored ${n}`),t.forEach(e=>{let t=e(n);"boolean"==typeof t&&(o=!1,console.log("foreveralone.dfs log, execution ended on demand")),Array.isArray(t)&&o&&r.push(...t)})}};static append=(e,t)=>e.appendChild(t);static prepend=(e,t)=>e.insertBefore(t,e.firstChild);static remove=(e,t)=>e.removeChild(t);static addHtml=(e,t)=>{let r=[],o=document.createElement("div");for(o.innerHTML=t;o.firstChild;)r.push(o.firstChild),o.removeChild(o.firstChild);r.forEach(t=>e.appendChild(t))};static cleanAndAddHtml=(e,t)=>{this.clean(e),this.addHtml(e,t)};static transferHTML=(e,t)=>{let r=[],o=e.cloneNode(!0);for(;o.firstChild;)r.push(o.firstChild);r.forEach(e=>t.appendChild(e))};static transferHTMLAndReplaceHTML=(e,t)=>{this.clean(t),this.transferHTML(e,t)};static text=(e,t)=>e.textContent=t;static clean=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};static attr=(e,t,r)=>e.setAttribute(t,r);static css=(e,t,r)=>e.style[t]=r;static addClass=(e,t)=>e.classList.add(t);static removeClass=(e,t)=>e.classList.remove(t);static toggleClass=(e,t)=>e.classList.toggle(t);static hasClass=(e,t)=>e.classList.contains(t);static find=(e,t=document)=>{let r=t.querySelectorAll(e);return 1===r.length?r[0]:r};static children=e=>Array.from(e.children);static parent=e=>e.parentNode;static next=e=>e.nextElementSibling;static prev=e=>e.previousElementSibling;static nextAll=e=>{let t=[],r=e.nextElementSibling;for(;r;)t.push(r),r=r.nextElementSibling;return t};static prevAll=e=>{let t=[],r=e.previousElementSibling;for(;r;)t.push(r),r=r.previousElementSibling;return t};static nextUntil=(e,t)=>{let r=[],o=e.nextElementSibling;for(;o&&!o.matches(t);)r.push(o),o=o.nextElementSibling;return r};static prevUntil=(e,t)=>{let r=[],o=e.previousElementSibling;for(;o&&!o.matches(t);)r.push(o),o=o.previousElementSibling;return r};static clone=(e,t=!0)=>e.cloneNode(t);static wrap=(e,t)=>{if(!e||!e.parentNode){console.error("Invalid element or element is not in the DOM.");return}e.parentNode.insertBefore(t,e),t.appendChild(e)};static unwrap=(e,t=!1)=>{if(!e||!e.parentNode){console.error("Invalid element or element is not in the DOM.");return}let r=e.parentNode,o=r.parentNode;if(!o){console.error("Wrapper is not inside a parent.");return}o.insertBefore(e,r),!0==t&&o.removeChild(r)};static fetch=async({url:e,method:t,data:r=null,headers:o={}})=>{try{let n={method:t,headers:{"Content-Type":"application/json",...o},body:r?JSON.stringify(r):null},s=await fetch(e,n);if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let i=await s.json().catch(()=>s.text());return i}catch(a){throw console.error("Fetch error:",a),a}}}class _Fa_DebugHelper{static #a={};static #b=[];static debugTrace=!1;static #c={};static #d=!1;static toggleDebugAllTrue(){this.#d=!0}static toggleDebugAllFalse(){this.#d=!1}static debugReference(e){return e||(e="Unknown"),this.#a[e]||(this.#a[e]=!1,this.#b.push(e)),(t,r,o=null)=>this.debugLogs({ref:e,type:t,message:r,data:o})}static traceOn(){this.debugTrace=!0}static isTraceable(e){"string"==typeof e?this.#c[e]=!0:Array.isArray(e)&&e.forEach(e=>{this.#c[e]=!0})}static debugLogs({ref:e,type:t,message:r,data:o=null}){if(!0===this.#a[e]||!0===this.#d){let n=_Fa_DebugHelper_Styles.styles[t]||_Fa_DebugHelper_Styles.styles.log;switch(t){case"error":console.error(`%c${r}`,n);break;case"warn":console.warn(`%c${r}`,n);break;case"info":console.info(`%c${r}`,n);break;case"debug":console[trace](`%c${r}`,n);break;default:console.log(`%c${r}`,n)}}o&&console.log(o)}static initDebug(e){"string"==typeof e?this.#a[e]=!0:Array.isArray(e)&&e.forEach(e=>{this.#a[e]=!0})}}class _Fa_DebugHelper_Styles{static styles={error:"color: white; background-color: red; font-weight: bold;",warn:"color: black; background-color: yellow; font-weight: bold;",info:"color: blue; background-color: lightgray; font-weight: normal; padding: 4px;",debug:"color: white; background-color: darkorange; font-weight: normal; padding: 2px 4px;",success:"color: green; background-color: lightgreen; font-weight: bold; padding: 4px;",log:"color: black; background-color: white; font-weight: normal;"}}class _Fo_NavigationHelper extends _Fo_UtilityFunc{static debug=_Fa_DebugHelper.debugReference("_Fo_NavigationHelper");static go(e){"string"==typeof e?window.history.pushState({},"",e):this.debug("warn","Invalid route name. Expected a string, but received:",e)}static back(){window.history.back()}static forward(){window.history.forward()}static getHistory(){return window.history}}class _Fo_AppShell{static #e=_Fa_DebugHelper.debugReference("_Fo_AppShell");static #f;static setFragment(e){if("string"==typeof e){let t=document.querySelector(e)||document.getElementById(e)||null;t?this.#f=t:this.#e("error",`Invalid fragment query selector detected, no element on the DOM Match for ${e}`)}else"object"==typeof e&&(e?.nodeName?this.#f:this.#e("error","Invalid fragment detected, the given fragment is not a valid HTML, current value :",e))}static async render(e){if(this.#f){let t=await e.render();if(t)return foreveralone.clean(this.#f),this.#f.appendChild(t),foreveralone.emit("app:viewChanged"),!0;throw Error("Fatal Error: Error while requesting route rendering")}throw Error("Fatal Error: no fragment have been given")}}class _Fo_AppRouter{static #e=_Fa_DebugHelper.debugReference("_Fo_AppRouter");static #g={root:"/index",load:"/loading",err:"/404"};static #h=["render","setFragment"];static async configure({appShell:e,loadTime:t,pagesRef:r,middlewares:o}){if(this.appShell)this.appShell&&e&&this.#e("warn","tentative to override appShell unauthorized");else try{this.#h.forEach(e=>this.appShell[e])}catch(n){throw Error("Fatal Error: invalid AppShell provided to the router")}this.loadTime=t||this.loadTime||1500,this.pagesRef={...this.#g,...this.pagesRef,...r||{}},this.middlewares=[...this.middlewares||[],...o||[]]}static #i=[];static #j(e){return this.#i.filter(e)}static #k=["key","path","props","children","headers","methods","component"];static addRoute(e){try{this.#k.forEach(t=>e[t]),this.#i.push(e)}catch(t){this.#e("warn","Invalid Route detected, passed :",e)}}static async onUrlChange(){console.log("yet to be implemented")}static async onUrlChangeStandard(e){if(!this.appShell)throw Error("Fatal Error: AppShell have been given to the router");if(e.match(/\w+\.\w+/g)||""===e.trim()){this.#e("info",`File link detected, redirecting to root ${this.pagesRef.root}`),window.history.pushState({},"",this.pagesRef.root),window.dispatchEvent(new Event("popstate"));return}try{for(let t of(this.#e("info",`URL changed: ${currentLocation}`),this.location=currentLocation,this.currentRoute=this.#j(e=>e.match(this.location)),this.loadingRoute=this.#j(e=>e.match(this.pagesRef.load)),this.errorRoute=this.#j(e=>e.match(this.pagesRef.error)),this.loadingRoute&&this.appShell.render(this.loadingRoute),this.middlewares)){let r=await t(this.currentRoute);if(!0!==r){this.#e("warn",`Middleware blocked route: ${r}`);return}}return this.currentRoute?(await this.executeLifeCycle("onCurrentRouteFound"),setTimeout(()=>{this.appShell.render(this.currentRoute)},this.loadTime)):this.errorRoute?(this.#e("warn",`No route found for: ${this.location}`),setTimeout(()=>this.appShell.render(this.errorRoute),this.loadTime)):this.#e("warn",`No route found for: ${this.location}, And No Error route found have been provided`),!0}catch(o){this.#e("error",`Error during URL change handling: ${o.message}`)}}static isJQueryAvailable=()=>"undefined"!=typeof $;static init(){this.isJQueryAvailable()?this.#e("info","JQuery detected, igniting router on JQuery Version"):this.#e("info","No JQuery detected, igniting router on standard Version"),window.addEventListener("popstate",()=>{this.isJQueryAvailable()?_Fo_AppRouter.onUrlChange(window.location.pathname):_Fo_AppRouter.onUrlChangeStandard(window.location.pathname)}),document.addEventListener("click",e=>{e.target.hasAttribute("app-link")&&(e.preventDefault(),window.location.pathname!=e.target.getAttribute("href")&&(window.history.pushState({},"",e.target.getAttribute("href")),window.dispatchEvent(new Event("popstate"))))})}static lifeCycle=new Proxy({onUrlChange:{},onLoading:{},onError:{},onCurrentRouteFound:{},extendLifeCycle(e){if(this[e])throw Error(`Unauthorized override of lifeCycle: "${e}", requires core code modification`);this[e]={}}},{get:(e,t)=>(t in e||this.debug("warn",`LifeCycle property "${t}" not found, using default setting behavior`),e[t]),set(e,t,r){if(!e[t])return e[t]=r,!0;throw Error(`Cycle "${t}" already exists. Core code modification required.`)}});static async executeLifeCycle(e){let t=this.lifeCycle[e];if(t){for(let r in t)if(await t[r](this.args)===!1)return this.#e("warn",`LifeCycle "${e}" failed at "${r}"`),!1}if(!t)return this.#e("warn",`Lifecycle "${e}" is not defined.`),!1}static args={currentRoute:()=>this.currentRoute,loadingRoute:()=>this.loadingRoute,location:()=>this.location,errorRoute:()=>this.errorRoute,findRoute:e=>this.#j(e),RouteUrlParam:()=>this.currentRoute.urlParam.paramExtractor(this.location)};static use({name:e,at:t,fn:r}){let o=this.useArgs;t?this.registerLifeCycle(t,e,r,o):this.registerMethod(e,r,o)}static async registerLifeCycle(e,t,r,o){async function n(){await new Promise((n,s)=>{let i=setInterval(()=>{this.LifeCycle[e]&&(this.LifeCycle[e][t]=r(o),n(!0),clearInterval(i))},100)})}let s=await n();s&&this.#e("info",`LifeCycle "${t}" registered at "${e}"`)}static registeredMethods={};static registerMethod(e,t,r){this.registeredMethods[e]=t(r)}}class _Fo_AppRoute{debug=_Fa_DebugHelper.debugReference("_Fo_AppRoute");constructor({key:e,path:t,children:r,props:o,headers:n=null,method:s=null,body:i=null}){this.key=e,this.path=t,this.headers=n,this.props=o,this.method=s,this.body=i,this.children=r||[],this.urlParam=new _Fo_AppRoute_UrlParameter({pattern:e})}async render(){if(this.debug("info",`route ${this.key} requested`),this.component)return this.component;let{data:e,error:t}=await this.fetch();if(t)return this.debug("error",`Error fetching route "${this.key}"`),null;{let r=document.createElement("div");r.setAttribute(_Fo_Component.keyword.component,""),r.innerHTML=e,r.props={...this.props};let o=0,n=new MutationObserver(()=>o+=50);for(n.observe(r,{childList:!0,subtree:!0}),new _Fo_Component({node:r});0!=o;)await new Promise(e=>setTimeout(()=>{0===o||(o-=50)},50));return n.disconnect(),this.component=r,this.component}}cloneWithListeners(e){let t=e.cloneNode(!0),r=getEventListeners(e);for(let o in r)r[o].forEach(e=>{t.addEventListener(o,e.listener,e.useCapture)});return t}match(e){return this.urlParam.match(e)}async fetch(){try{let e=await fetch(this.path,{method:this.method||"GET"});if(!e.ok)throw Error(`HTTP error! Status: ${e.status}`);return{data:await e.text(),error:null}}catch(t){return console.error(`Error fetching route "${this.key}":`,t),{data:null,error:t}}}}class _Fo_AppRoute_UrlParameter{debug=_Fa_DebugHelper.debugReference("_Fo_AppRoute_UrlParameter");constructor({pattern:e}){this.patternToSearch=e,this.routeStructure=[],this.constructRegex()}constructRegex(){this.patternToSearch=this.patternToSearch.replace(/\/$/,""),console.log("this pattern",this.patternToSearch);let e=this.patternToSearch.match(/(:\w+ type:\w+)|([^:]+(?=:)|[^:]+$)/g);this.routeRegex=e.map(e=>e.includes("type:")?this.parseParam(e):(this.routeStructure.push(e),e)).join(""),console.log("RouteLink",this.routeRegex)}match(e){let t=e.replace(/\/$/,"").split("/"),r=this.routeRegex.split("/");if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++){let n=r[o],s=RegExp(n);if(!s.test(t[o]))return!1}return!0}parseParam(e){let t=e.split(" ");if(t.length>=1){let r=t[0],o=t[1].split("/")[0].replace("type:","");return this.routeStructure.push(r),this.getRegexForType(o)}}getRegexForType(e){switch(e){case"string":return"([\\w\\d\\-_]+)";case"number":return"([0-9]+)";case"boolean":return"true|false";default:return console.warn(`Unrecognized type: ${e}. Using default (.*)`),"(.*)"}}paramExtractor(e){if(!this.match(e))return!1;{let t={},r=hashUrl.replace(/\/$/,"").split("/"),o=this.routeStructure.join("").split("/");for(let n=0;n<r.length;n++)o[n].includes(":")&&(t[o[n].replace(":","").trim()]=r[n]);return t}}}class _Fo_Component{debug=_Fa_DebugHelper.debugReference("_Fo_Component");constructor({node:e,options:t}){if(this.node=e,this.options=t,this.node?.isFoComponent)return;this.node.isFoComponent=!0,this.configureComponent();let r=_Fa_getTag({node:this.node,tagname:"children"});if(null!=r)this.debug("info","_Fo_Component configured, initializing parsing and placeholder interpretation."),this.children=r,this.parseComponent(),this.buildComponent(),this.node.querySelector("getComponent")&&this.HandleGetComponentTag();else throw Error(`No children detected on data-stand-alone-component ${e}`)}static keyword={component:"stand-alone","event-handler":"lone-event"};parseComponent(){this.parseToCommonHTML(),this.parseComponentPlaceholder()}parseComponentPlaceholder(e=this.node){this.debug("info",`==> Begin parsing by DFS on _Fo_Component ${this.node.nodeName}`),_Fa_DFSHelper({node:e,predicates:[(e,t)=>{t?.getAttribute&&(this.debug("debug",`==> Parsing by DFS, current node ${t.nodeName}`),t.innerHTML=new _Fo_Component_PlaceholderParser({nodeOrigin:this.node,node:t,content:t.innerHTML}),this.debug("debug",`==> Parsing by DFS, current result ${this.node.innerHTML}`))},(e,t)=>{if(t?.childNodes?.length>0&&(!t.hasAttribute(_Fo_Component.keyword.component)||t===this.node))return[...t.childNodes]},]}),this.debug("info",`==> Parsing by DFS ended on _Fo_Component ${this.node.nodeName}`)}buildComponent(){this.traverseAndSetPseudoEvent(),this.debug("info",`Binding MutationObserver on ${this.node.nodeName}`),this.node.addEventListener("node-builded",()=>{let e=new MutationObserver(()=>{this.debug("info",`Mutation detected in _Fo_Component ${this.node.nodeName}, re-executing traverseAndSetPseudoEvent.`),this.traverseAndSetPseudoEvent(this.childNodes)});e.observe(this.node,{childList:!0,subtree:!0})},{once:!0}),this.node.dispatchEvent(new CustomEvent("node-builded"))}parseToCommonHTML(){this.debug("info",`Parsing _Fo_Component ${this.node.nodeName} to Common HTML`);let e=this.children.cloneNode(!0),t=Array.from(e.childNodes);this.node.innerHTML="",t.forEach(e=>this.node.appendChild(e)),this.debug("success",`Parsing _Fo_Component ${this.node.nodeName} to Common HTML completed`)}traverseAndSetPseudoEvent(e=this.node){e&&(this.debug("info","==> Begin Event Binding & Ignition of _Fo_Component Children by DFS"),_Fa_DFSHelper({node:e,predicates:[(e,t)=>{t?.getAttribute&&(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"debug",message:`Trying to set pseudo-event on node ${t.nodeName}`}),t.useAncestorMethod||(t.parentComponentRef=this.node,t.useAncestorEventMethod=_Fa_ParentChildRelationshipHelper_useAncestorEventMethod,t.useAncestorMethod=_Fa_ParentChildRelationshipHelper_useAncestorMethod,t.useAncestorProp=_Fa_ParentChildRelationshipHelper_useAncestorProp),this.setPseudoEvent(t))},(e,t)=>{if(t?.childNodes?.length>0){if(!t.hasAttribute(_Fo_Component.keyword.component)||t===this.node)return[...t.childNodes];setTimeout(()=>{new _Fo_Component({node:t,options:this.options})},500)}},]}),this.debug("success","==> Event Binding & Ignition of _Fo_Component Children by DFS completed"))}setPseudoEvent(e,t=this.node){let r=e?.getAttribute(_Fo_Component.keyword["event-handler"]);r&&(t.loneEvents||(t.loneEvents={},t.loneEventsListened=[]),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"info",message:`=> Valid event props detected, setting events on node ${e.nodeName}`}),r.split(";").forEach(r=>{let[o,n]=r.split(":");if(!o||!n){_Fa_DebugHelper.debugLogs({ref:this.debug,type:"error",message:`=> Invalid event format for node: ${e.nodeName}. Expected format: "event:handlerName", given: ${r}`});return}t.loneEvents[o]||(t.loneEvents[o]=[]);let s=function(r){"function"==typeof t.eventMethods[n.toLowerCase()]?t.eventMethods[n.toLowerCase()].call(this,r):console.error(`Handler function '${n}' not found on node`,e)};t.loneEvents[o].push({node:e,handler:s}),["mouseenter","mouseleave","focus","blur","dragenter","dragleave"].includes(o)?e.addEventListener(o,t=>{s.call(e,t)}):t.loneEventsListened.includes(o)||(t.loneEventsListened.push(o),t.addEventListener(o,e=>{let r=t.loneEvents[o];r&&r.forEach(({node:t,handler:r})=>{e.target===t&&r.call(e.target,e)})}))}),e.removeAttribute(_Fo_Component.keyword["event-handler"]))}async selfHttpHelper({url:e,header:t,method:r="GET"}){return(await fetch(e,{method:r,headers:t})).text()}async HandleGetComponentTag(){let e=[this.node];for(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`=> Start of HandleGetComponentTag() with queue: ${e}`});e.length>0;){let t=e.shift();if(t?.nodeName?.match(/getComponent/i)){let r=t.getAttribute("src");_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`<getComponent ...> detected, trying to fetch component, at source "${r}"`});try{let o=await this.selfHttpHelper({url:r}),n=document.createElement("div");for(n.innerHTML=o,_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`fetch success, replacing <getComponent> with: 
"${o}"`});n.firstChild;)t.parentNode.insertBefore(n.firstChild,t);t.parentNode.removeChild(t),Array.from(n.childNodes).forEach(t=>e.push(t))}catch(s){_Fa_DebugHelper.debugLogs({ref:this.debug,type:"error",message:`Failed to load component for node: ${t}. Error: ${s.message}`});let i=document.createComment(`failed to get component at src "${r}"`);t.parentNode.replaceChild(i,t)}}t?.childNodes?.length>0&&Array.from(t.childNodes).forEach(t=>e.push(t)),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`processed node: ${t.nodeName} with children: ${t.childNodes.length}`}),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`queue length: ${e.length}`})}}configureComponent(){new _Fo_Component_Config({node:this.node})}}class _Fo_Component_Config{debug=_Fa_DebugHelper.debugReference("_Fo_Component_Config");constructor({node:e,options:t}){_Fa_DebugHelper.debugLogs({ref:this.debug,type:"info",message:"Initializing _Fo_Component_Config..."}),this.node=e,this.getProperty(),this.setProperty(),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"success",message:"Initialization completed for _Fo_Component_Config."})}getTag(e){let t=this.node.querySelector(e);return this.debug("warn",`getTag called for tagname: ${e}, result: ${t?"found":"not found"}.`),t||null}static componentProperty=["props","methods","eventMethods"];componentProperty=_Fo_Component_Config.componentProperty;getProperty(){this.debug("debug","Fetching component properties..."),this.componentProperty.forEach(e=>{let t=_Fa_getTag({node:this.node,tagname:e}),r=t?.getAttributeNames()||[];this[`${e}Names`]=r,this.node[e]=this.node[e]||{},this.debug("debug",`Property: ${e}, Attributes: ${JSON.stringify(r)}.`)})}setProperty(){this.debug("debug","Setting component properties..."),this.componentProperty.forEach(e=>{this[`${e}Names`].forEach(t=>{let r=_Fa_getTag({node:this.node,tagname:e}),o=r?.getAttribute(t);this.node[e][t]=this.parseProperty(o),this.debug("debug",`Set property: ${t}, Value: ${o}.`)})})}parseProperty(e){if(!e)return;let t=e.trim(),r=!!t.match(/^{.*}$/),o=!!t.match(/^\s*(.*?)\s*=>\s*\{([\s\S]*?)\}\s*$/),n=!!t.match(/^\[.*\]$/);if(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"debug",message:`Parsing property: ${e}, Detected format: ${r?"JSON":o?"Arrow Function":n?"Array String":"Unknown"}.`}),r)try{return JSON.parse(t)}catch(s){return this.debug("error",`JSON parsing failed for property: ${e}, error: ${s}.`),null}else if(o)try{return Function("props",`return (${t})(props);`)}catch(i){return this.debug("error",`Arrow function execution failed for property: ${e}, error: ${i}.`),null}else if(n)try{return JSON.parse(t)}catch(a){return this.debug("error",`Array string parsing failed for property: ${e}, error: ${a}.`),null}return this.debug("error",`Invalid property format detected for: ${e}.`),null}}class _Fo_Component_LifecycleInterpreter{debug=_Fa_DebugHelper.debugReference("_Fo_Component_LifecycleInterpreter");constructor({node:e}){this.debug("info",`Initializing Lifecycle Interpreter for component: ${e.componentName}.`),this.node=e,this.debug("info",`Lifecycle Interpreter initialized for component: ${e.componentName}, with lifecycle: ${e.lifecycle}.`)}lifeCycle=["onMount","onUpdate",];getLifecycleTagInfo(){}}const _Fa_ParentChildRelationshipHelper_useAncestorMethod=function({method:e,skipMatch:t=0,context:r=null}){let o=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorMethod"),n=(t,n,s)=>{_Fa_DebugHelper.debugLogs({ref:o,type:t,message:`Html Element requests access to its _Fo_Component ancestor's method: ${e}, 
context: ${r?"element":"parent"} 
result: ${s}`})};n("log",`Searching for method '${e}'`,"initiated");let s=this?.parentComponentRef;for(;s;){if(console.log("current node explored: ",s),s?.methods[e.toLowerCase()]){if(0===t)return n("log",`Found method '${e}'`,"success"),s.methods[e.toLowerCase()].bind(r||s);t--}s=s?.parentComponentRef}return n("error",`Method '${e}' not found`,"failed"),null},_Fa_ParentChildRelationshipHelper_useAncestorProp=function({prop:e,skipMatch:t=0,context:r=null}){let o=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorProp"),n=(t,r,n)=>{_Fa_DebugHelper.debugLogs({ref:o,type:t,message:`Html Element requests access to its _Fo_Component ancestor's property: ${e}`})};n("log",`Searching for property '${e}'`,"initiated");let s=this?.parentComponentRef;for(;s;){if(console.log("current node explored:",s),s?.props[e.toLowerCase()]){if(0===t)return n("log",`Found property '${e}'`,"success"),"object"==typeof s.props[e.toLowerCase()]?s.props[e.toLowerCase()]:s.props[e.toLowerCase()].bind(r||s);t--}s=s?.parentComponentRef}return n("error",`Method '${e}' not found`,"failed"),null},_Fa_ParentChildRelationshipHelper_useAncestorEventMethod=function({eventMethod:e,skipMatch:t=0,context:r=null}){let o=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorEventMethod"),n=(t,r,n)=>{_Fa_DebugHelper.debugLogs({ref:o,type:t,message:`Html Element requests access to its _Fo_Component ancestor's eventMethod: ${e}`})};n("log",`Searching for eventMethod '${e}'`,"initiated");let s=this?.parentComponentRef;for(;s;){if(console.log("current node explored:",s),s?.eventMethods[e.toLowerCase()]){if(0===t)return n("log",`Found eventMethod '${e}'`,"success"),s.eventMethods[e.toLowerCase()].bind(r||s);t--}s=s?.parentComponentRef}return n("error",`eventMethod '${e}' not found`,"failed"),null};class _Fo_Component_PlaceholderParser{debug=_Fa_DebugHelper.debugReference("_Fo_Component_PlaceholderParser");constructor({nodeOrigin:e,node:t,content:r}){this.node=t,this.interpreter=t=>new _Fo_Component_PlaceholderReplacer({node:e,content:t}).replacePlaceHolder(),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`==> _Fo_Component_PlaceholderParser called for ${t} with content ${r}`});let o=new String(this.placeholderParser(r));return _Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`==> _Fo_Component_PlaceholderParser call result:
 ${o}

result type:${typeof o}`}),o}placeholderParser(e){if(""===e.trim)return this.debug("log","==> _Fo_Component_PlaceholderParser placeholderParser called with empty value"),e;let t=e.split(/<\/?\w+[^>]*>(?=(?:(?!(?:{{[^}]*}}))<\/?\w+[^>]*>)*$)/g);this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with splitted value ${t} }`);let r=[],o=[];for(let n of t){let s=n.trim();if(/^<\w+[^>]*>$/.test(s)){r.push(s);let i=1===r.length?s.replace(/(="")|(='')/g,"").replace(/(\{\{\s*(.*?)\s*\}\})/g,(e,t)=>{let r=this.interpreter(t.trim());return this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with code ${t}
result: ${r}`),r}):s;o.push(String(i)),this.isSelfClosing(s)&&r.pop()}else/^<\/\w+>$/.test(s)?(r.pop(),o.push(String(s))):/\{\{.*?\}\}/.test(s)&&0===r.length?o.push(String(s.replace(/(\{\{\s*.*?\s*\}\})/g,(e,t)=>{let r=this.interpreter(t.trim());return this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with code ${t}
result: ${r}`),r}))):s.length>0&&o.push(String(s))}let a=o.join("");return this.debug("debug",`Final Processed Output: ${a}`),a}isSelfClosing(e){return/<\w+[^>]*\/>/.test(e)||/<\s*(img|br|hr|input|meta|link|area|base|col|embed|source|track|wbr|getComponent)\b[^>]*>/i.test(e)}}class _Fo_Component_PlaceholderReplacer{debug=_Fa_DebugHelper.debugReference("_Fo_Component_PlaceholderReplacer");constructor({node:e,content:t}){this.node=e,this.content=t}replacePlaceHolder(){return this.content&&"string"==typeof this.content?(this.debug("debug",`Replacing placeholder in ${this.node.nodeName} with content: ${this.content}`),this.content.replace(/{{\s*(.*?)\s*}}/g,(e,t)=>{try{if(t.includes("||")){let[r,o]=t.split("||").map(e=>e.trim());return this.evaluateExpression(r)||this.evaluateExpression(o)}if(t.includes("?")){let[n,s]=t.split("?").map(e=>e.trim()),[i,a]=s.split(":").map(e=>e.trim());return this.evaluateExpression(n)?this.evaluateExpression(i):this.evaluateExpression(a)}if(t.includes("(")&&t.includes(")")&&!t.trim().startsWith("forDataIn(")){let l=t.match(/(\w+)\((.*?)\)/);if(l){let[d,h,c]=l,u=this.node.methods[h.toLowerCase()];if(this.debug("debug",`Invoking method ${h} with args: ${""===c.trim()?"(no argument passed)":c}`),"function"==typeof u){let p=c.split(",").map(e=>this.evaluateExpression(e.trim()));return p?.length>0?u():u(...p)}}throw Error(`Method ${t} is not defined or is not a function.`)}else if(t.startsWith("forDataIn(")){let g=t.trim().match(/forDataIn\((.+?),\s*['"`](.+?)['"`]\)/);if(g){let[f,m,b]=g,y=this.evaluateExpression(m);if(this.debug("debug",`Invoking forDataIn with data: ${y} and template: ${b}`),Array.isArray(y))return y.map(e=>b.replace(/value\.(\w+)/g,(t,r)=>e[r]||"")).join("")}throw Error(`Invalid forDataIn expression: ${t}`)}return this.evaluateExpression(t)}catch(F){return this.debug("error",`Error evaluating placeholder "${t}": ${F.message}`),""}})):this.content}evaluateExpression(e){try{let t=Function("props",`with (props) { return ${e}; }`);return t(this.node.props)}catch(r){return this.debug("warn",`Error evaluating expression "${e}" : ${r.message}`),null}}}const _Fa_getTag=({node:e,tagname:t})=>{let r=_Fa_DebugHelper.debugReference("_Fa_getTag"),o=!!(e&&e.querySelector(t));return r(`${!0==o?"log":"warn"}`,`helper func _Fa_getTag called for node "${e.nodeName}", child to find "${t}" 
result: ${!0==o?"found":"not found"}`),!0==o?e.querySelector(t):null},_Fa_DFSHelper=function({node:e,predicates:t}){let r=Array.isArray(e)?[...e]:[e];for(;r.length>0;){let o=r.pop();t.forEach(e=>{let t=e(r,o);Array.isArray(t)&&r.push(...t)})}};class _Fo_AppState extends _Fo_UtilityFunc{#l;#m;constructor(){super(),this.#m=Symbol("accessKey");let e={};this.#l=new Proxy(e,{deleteProperty(e,t,r){throw Error(`Deleting keys is not allowed: ${String(t)}`)},set:(e,t,r)=>(e[t]=r,document.querySelectorAll(`[bind-state="${t}"]`).forEach(e=>{e.textContent=r}),!0)}),foreveralone.on("app:viewChanged",()=>{Object.keys(this.#l).forEach(e=>{document.querySelectorAll(`[bind-state="${e}"]`).forEach(t=>{t.textContent=this.#l[e]||t.getAttribute(`${e}-default`)||""})})})}bindState(e,t){if("string"==typeof e){let r=document.querySelector(e)||document.getElementById(e);r?r.setAttribute("bind-state",t):console.error(`Element not found: ${e}, for state binding`)}else e?.nodeName&&e.setAttribute("bind-state",t)}getAccessKey(){return this.#m}setState(e,t,r){if(r!==this.#m)throw Error("Unauthorized access: Invalid key.");if("symbol"!=typeof r)throw Error("Invalid access key type. Must be a symbol.");this.#l[e]=t}getState(e,t,r){if("symbol"!=typeof t)throw Error("Invalid access key type. Must be a symbol.");if(t!==this.#m)throw Error("Unauthorized access: Invalid key.");return void 0!==this.#l[e]?this.#l[e]:r}debugState(e){if(e!==this.#m)throw Error("Unauthorized access: Invalid key.");return{...this.#l}}syncWithLocalStorage(){let e=this.getAccessKey();localStorage.setItem("appState",JSON.stringify(this.debugState(e)))}loadFromLocalStorage(){let e=this.getAccessKey(),t=JSON.parse(localStorage.getItem("appState")||"{}");Object.entries(t).forEach(([t,r])=>this.setState(t,r,e))}onChange(e){changeHandlers.indexOf(e)||this.changeHandlers.push(e)}setState(e,t,r){super.setState(e,t,r),this.changeHandlers.forEach(r=>r(e,t))}}class _Fo_AppJWT extends _Fo_AppState{constructor(){super(),this.jwt=null}setJWT(e,t){if(t!==this.getAccessKey())throw Error("Unauthorized access: Invalid key.");this.jwt=e}getJWT(e){if(e!==this.getAccessKey())throw Error("Unauthorized access: Invalid key.");return this.jwt}isJWTValid(){return!!this.jwt}}class foreveralone extends _Fo_AppJWT{static debug=_Fa_DebugHelper.debugReference("foreveralone");constructor(){super()}}foreveralone.configure=_Fo_AppRouter.configure,foreveralone.init=_Fo_AppRouter.init,foreveralone.use=_Fo_AppRouter.use,foreveralone.registerMethods=_Fo_AppRouter.registeredMethods,foreveralone.extendLifeCycle=_Fo_AppRouter.executeLifeCycle,foreveralone.appVar=_Fo_AppRouter.args,foreveralone.useMiddleware=e=>{if("function"==typeof e)_Fo_AppRouter.middlewares.push(e);else throw Error("Invalid middleware: Expected a function.")},foreveralone.#n=([{key:e,path:t,children:r,props:o,headers:n=null,method:s=null,body:i=null}]=routes)=>{foreveralone.dfs({node:routes,predicates:[e=>{if(e?.path&&e.key){let t=new _Fo_AppRoute(e);_Fo_AppRouter.addRoute(t)}else this.debug("warn",`Invalid route: ${JSON.stringify(e)}`)},e=>{if(e?.children){let t=e.children;if(Array.isArray(t))return t=(t=t.filter(e=>!!e.key||(this.debug("warn",`Invalid children: ${JSON.stringify(t)}, skipped in execution`),!1))).map(t=>(t.path||(t.path=e.path),t.key=`${e.key.replace(/\/$/,"")}/${t.key.replace(/^\//,"")}`,t.props={...t?.props,...e?.props},t));this.debug("warn",`Invalid children: ${JSON.stringify(t)}`)}},]})};const _Fa_Test_Fo_Url_Parameter={},_Fa_Test_Fo_AppRoute={};