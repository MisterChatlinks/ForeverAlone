class _Fo_EventManager{static listener={};static on(e,t){this.listener[e]||(this.listener[e]=[]),this.listener[e].includes(t)||this.listener[e].push(t)}static once(r,o){this.listener[r]||(this.listener[r]=[]);let n=e=>{var t=this.listener[r].indexOf(n);this.listener[r]=this.listener[r].splice(t,1),o(...e)};this.listener[r].includes(o)||this.listener[r].push(n)}static off(e,t){_Fo_AppManager.listener[e]&&-1!==(t=_Fo_AppManager.listener[e].indexOf(t))&&_Fo_AppManager.listener[e].splice(t,1)}static emit(e,...t){_Fo_AppManager.listener[e]&&_Fo_AppManager.listener[e].forEach(e=>e(...t))}}class _Fo_UtilityFunc extends _Fo_EventManager{constructor(){super()}static customEvent=({selector:e,event:t,data:r=null})=>{var o=document.querySelectorAll(e);1==o.length?o[0].dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0})):1<o.length?o.forEach(e=>{e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0}))}):console.log(`foreveralone.customEvent log, element with selector ${e} not found`)};static dfs=({node:e,predicates:t})=>{let r=Array.isArray(e)?[...e]:[e],o=!0;for(;0<r.length;){const n=r.pop();console.log("foreveralone.dfs log, node current explored "+n),t.forEach(e=>{e=e(n);"boolean"==typeof e&&(o=!1,console.log("foreveralone.dfs log, execution ended on demand")),Array.isArray(e)&&o&&r.push(...e)})}};static append=(e,t)=>e.appendChild(t);static prepend=(e,t)=>e.insertBefore(t,e.firstChild);static remove=(e,t)=>e.removeChild(t);static addHtml=(t,e)=>{var r=[],o=document.createElement("div");for(o.innerHTML=e;o.firstChild;)r.push(o.firstChild),o.removeChild(o.firstChild);r.forEach(e=>t.appendChild(e))};static cleanAndAddHtml=(e,t)=>{this.clean(e),this.addHtml(e,t)};static transferHTML=(e,t)=>{for(var r=[],o=e.cloneNode(!0);o.firstChild;)r.push(o.firstChild);r.forEach(e=>t.appendChild(e))};static transferHTMLAndReplaceHTML=(e,t)=>{this.clean(t),this.transferHTML(e,t)};static text=(e,t)=>e.textContent=t;static clean=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};static attr=(e,t,r)=>e.setAttribute(t,r);static css=(e,t,r)=>e.style[t]=r;static addClass=(e,t)=>e.classList.add(t);static removeClass=(e,t)=>e.classList.remove(t);static toggleClass=(e,t)=>e.classList.toggle(t);static hasClass=(e,t)=>e.classList.contains(t);static find=(e,t=document)=>{t=t.querySelectorAll(e);return 1===t.length?t[0]:t};static children=e=>Array.from(e.children);static parent=e=>e.parentNode;static next=e=>e.nextElementSibling;static prev=e=>e.previousElementSibling;static nextAll=e=>{var t=[];let r=e.nextElementSibling;for(;r;)t.push(r),r=r.nextElementSibling;return t};static prevAll=e=>{var t=[];let r=e.previousElementSibling;for(;r;)t.push(r),r=r.previousElementSibling;return t};static nextUntil=(e,t)=>{var r=[];let o=e.nextElementSibling;for(;o&&!o.matches(t);)r.push(o),o=o.nextElementSibling;return r};static prevUntil=(e,t)=>{var r=[];let o=e.previousElementSibling;for(;o&&!o.matches(t);)r.push(o),o=o.previousElementSibling;return r};static clone=(e,t=!0)=>e.cloneNode(t);static wrap=(e,t)=>{e&&e.parentNode?(e.parentNode.insertBefore(t,e),t.appendChild(e)):console.error("Invalid element or element is not in the DOM.")};static unwrap=(e,t=!1)=>{var r,o;e&&e.parentNode?(o=(r=e.parentNode).parentNode)?(o.insertBefore(e,r),1==t&&o.removeChild(r)):console.error("Wrapper is not inside a parent."):console.error("Invalid element or element is not in the DOM.")};static fetch=async({url:e,method:t,data:r=null,headers:o={}})=>{try{var n={method:t,headers:{"Content-Type":"application/json",...o},body:r?JSON.stringify(r):null};const s=await fetch(e,n);if(s.ok)return await s.json().catch(()=>s.text());throw new Error("HTTP error! status: "+s.status)}catch(e){throw console.error("Fetch error:",e),e}}}class _Fa_DebugHelper{static#debugStack={};static#debugRegistered=[];static debugTrace=!1;static#traceable={};static#debugAll=!1;static toggleDebugAllTrue(){this.#debugAll=!0}static toggleDebugAllFalse(){this.#debugAll=!1}static debugReference(o){return o=o||"Unknown",this.#debugStack[o]||(this.#debugStack[o]=!1,this.#debugRegistered.push(o)),(e,t,r=null)=>this.debugLogs({ref:o,type:e,message:t,data:r})}static traceOn(){this.debugTrace=!0}static isTraceable(e){"string"==typeof e?this.#traceable[e]=!0:Array.isArray(e)&&e.forEach(e=>{this.#traceable[e]=!0})}static debugLogs({ref:e,type:t,message:r,data:o=null}){if(!0===this.#debugStack[e]||!0===this.#debugAll){var n=_Fa_DebugHelper_Styles.styles[t]||_Fa_DebugHelper_Styles.styles.log;switch(t){case"error":console.error("%c"+r,n);break;case"warn":console.warn("%c"+r,n);break;case"info":console.info("%c"+r,n);break;case"debug":console[trace]("%c"+r,n);break;default:console.log("%c"+r,n)}}o&&console.log(o)}static initDebug(e){"string"==typeof e?this.#debugStack[e]=!0:Array.isArray(e)&&e.forEach(e=>{this.#debugStack[e]=!0})}}class _Fa_DebugHelper_Styles{static styles={error:"color: white; background-color: red; font-weight: bold;",warn:"color: black; background-color: yellow; font-weight: bold;",info:"color: blue; background-color: lightgray; font-weight: normal; padding: 4px;",debug:"color: white; background-color: darkorange; font-weight: normal; padding: 2px 4px;",success:"color: green; background-color: lightgreen; font-weight: bold; padding: 4px;",log:"color: black; background-color: white; font-weight: normal;"}}class _Fo_NavigationHelper extends _Fo_UtilityFunc{static debug=_Fa_DebugHelper.debugReference("_Fo_NavigationHelper");static go(e){"string"==typeof e?window.history.pushState({},"",e):this.debug("warn","Invalid route name. Expected a string, but received:",e)}static back(){window.history.back()}static forward(){window.history.forward()}static getHistory(){return window.history}}class _Fo_AppShell{static#debug=_Fa_DebugHelper.debugReference("_Fo_AppShell");static#fragment;static setFragment(e){var t;"string"==typeof e?(t=document.querySelector(e)||document.getElementById(e)||null)?this.#fragment=t:this.#debug("error","Invalid fragment query selector detected, no element on the DOM Match for "+e):"object"==typeof e&&(e?.nodeName?this.#fragment:this.#debug("error","Invalid fragment detected, the given fragment is not a valid HTML, current value :",e))}static async render(e){if(this.#fragment){e=await e.render();if(e)return foreveralone.clean(this.#fragment),this.#fragment.appendChild(e),foreveralone.emit("app:viewChanged"),!0;throw new Error("Fatal Error: Error while requesting route rendering")}throw new Error("Fatal Error: no fragment have been given")}}class _Fo_AppRouter{static#debug=_Fa_DebugHelper.debugReference("_Fo_AppRouter");static#defaultPageRef={root:"/index",load:"/loading",err:"/404"};static#appShellShape=["render","setFragment"];static async configure({appShell:e,loadTime:t,pagesRef:r,middlewares:o}){if(this.appShell)this.appShell&&e&&this.#debug("warn","tentative to override appShell unauthorized");else try{this.#appShellShape.forEach(e=>this.appShell[e])}catch(e){throw new Error("Fatal Error: invalid AppShell provided to the router")}this.loadTime=t||this.loadTime||1500,this.pagesRef={...this.#defaultPageRef,...this.pagesRef,...r||{}},this.middlewares=[...this.middlewares||[],...o||[]]}static#route=[];static#findRoute(e){return this.#route.filter(e)}static#routeShape=["key","path","props","children","headers","methods","component"];static addRoute(t){try{this.#routeShape.forEach(e=>t[e]),this.#route.push(t)}catch(e){this.#debug("warn","Invalid Route detected, passed :",t)}}static async onUrlChange(){console.log("yet to be implemented")}static async onUrlChangeStandard(e){if(!this.appShell)throw new Error("Fatal Error: AppShell have been given to the router");if(e.match(/\w+\.\w+/g)||""===e.trim())this.#debug("info","File link detected, redirecting to root "+this.pagesRef.root),window.history.pushState({},"",this.pagesRef.root),window.dispatchEvent(new Event("popstate"));else try{this.#debug("info","URL changed: "+currentLocation),this.location=currentLocation,this.currentRoute=this.#findRoute(e=>e.match(this.location)),this.loadingRoute=this.#findRoute(e=>e.match(this.pagesRef.load)),this.errorRoute=this.#findRoute(e=>e.match(this.pagesRef.error)),this.loadingRoute&&this.appShell.render(this.loadingRoute);for(const r of this.middlewares){var t=await r(this.currentRoute);if(!0!==t)return void this.#debug("warn","Middleware blocked route: "+t)}return this.currentRoute?(await this.executeLifeCycle("onCurrentRouteFound"),setTimeout(()=>{this.appShell.render(this.currentRoute)},this.loadTime)):this.errorRoute?(this.#debug("warn","No route found for: "+this.location),setTimeout(()=>this.appShell.render(this.errorRoute),this.loadTime)):this.#debug("warn",`No route found for: ${this.location}, And No Error route found have been provided`),!0}catch(e){this.#debug("error","Error during URL change handling: "+e.message)}}static isJQueryAvailable=()=>"undefined"!=typeof $;static init(){this.isJQueryAvailable()?this.#debug("info","JQuery detected, igniting router on JQuery Version"):this.#debug("info","No JQuery detected, igniting router on standard Version"),window.addEventListener("popstate",()=>{this.isJQueryAvailable()?_Fo_AppRouter.onUrlChange(window.location.pathname):_Fo_AppRouter.onUrlChangeStandard(window.location.pathname)}),document.addEventListener("click",e=>{e.target.hasAttribute("app-link")&&(e.preventDefault(),window.location.pathname!=e.target.getAttribute("href"))&&(window.history.pushState({},"",e.target.getAttribute("href")),window.dispatchEvent(new Event("popstate")))})}static lifeCycle=new Proxy({onUrlChange:{},onLoading:{},onError:{},onCurrentRouteFound:{},extendLifeCycle(e){if(this[e])throw new Error(`Unauthorized override of lifeCycle: "${e}", requires core code modification`);this[e]={}}},{get:(e,t)=>(t in e||this.debug("warn",`LifeCycle property "${t}" not found, using default setting behavior`),e[t]),set:(e,t,r)=>{if(e[t])throw new Error(`Cycle "${t}" already exists. Core code modification required.`);return e[t]=r,!0}});static async executeLifeCycle(e){var t=this.lifeCycle[e];if(t)for(var r in t)if(!1===await t[r](this.args))return this.#debug("warn",`LifeCycle "${e}" failed at "${r}"`),!1;if(!t)return this.#debug("warn",`Lifecycle "${e}" is not defined.`),!1}static args={currentRoute:()=>this.currentRoute,loadingRoute:()=>this.loadingRoute,location:()=>this.location,errorRoute:()=>this.errorRoute,findRoute:e=>this.#findRoute(e),RouteUrlParam:()=>this.currentRoute.urlParam.paramExtractor(this.location)};static use({name:e,at:t,fn:r}){var o=this.useArgs;t?this.registerLifeCycle(t,e,r,o):this.registerMethod(e,r,o)}static async registerLifeCycle(o,n,s,i){await async function(){await new Promise((e,t)=>{let r=setInterval(()=>{this.LifeCycle[o]&&(this.LifeCycle[o][n]=s(i),e(!0),clearInterval(r))},100)})}()&&this.#debug("info",`LifeCycle "${n}" registered at "${o}"`)}static registeredMethods={};static registerMethod(e,t,r){this.registeredMethods[e]=t(r)}}class _Fo_AppRoute{debug=_Fa_DebugHelper.debugReference("_Fo_AppRoute");constructor({key:e,path:t,children:r,props:o,headers:n=null,method:s=null,body:i=null}){this.key=e,this.path=t,this.headers=n,this.props=o,this.method=s,this.body=i,this.children=r||[],this.urlParam=new _Fo_AppRoute_UrlParameter({pattern:e})}async render(){if(this.debug("info",`route ${this.key} requested`),this.component)return this.component;var{data:e,error:r}=await this.fetch();if(r)return this.debug("error",`Error fetching route "${this.key}"`),null;{r=document.createElement("div");r.setAttribute(_Fo_Component.keyword.component,""),r.innerHTML=e,r.props={...this.props};let t=0;e=new MutationObserver(()=>t+=50);for(e.observe(r,{childList:!0,subtree:!0}),new _Fo_Component({node:r});0!=t;)await new Promise(e=>setTimeout(()=>{0!==t&&(t-=50)},50));return e.disconnect(),this.component=r,this.component}}cloneWithListeners(e){const r=e.cloneNode(!0);var o=getEventListeners(e);for(let t in o)o[t].forEach(e=>{r.addEventListener(t,e.listener,e.useCapture)});return r}match(e){return this.urlParam.match(e)}async fetch(){try{var e=await fetch(this.path,{method:this.method||"GET"});if(e.ok)return{data:await e.text(),error:null};throw new Error("HTTP error! Status: "+e.status)}catch(e){return console.error(`Error fetching route "${this.key}":`,e),{data:null,error:e}}}}class _Fo_AppRoute_UrlParameter{debug=_Fa_DebugHelper.debugReference("_Fo_AppRoute_UrlParameter");constructor({pattern:e}){this.patternToSearch=e,this.routeStructure=[],this.constructRegex()}constructRegex(){this.patternToSearch=this.patternToSearch.replace(/\/$/,""),console.log("this pattern",this.patternToSearch);var e=this.patternToSearch.match(/(:\w+ type:\w+)|([^:]+(?=:)|[^:]+$)/g);this.routeRegex=e.map(e=>e.includes("type:")?this.parseParam(e):(this.routeStructure.push(e),e)).join(""),console.log("RouteLink",this.routeRegex)}match(e){var t=e.replace(/\/$/,"").split("/"),r=this.routeRegex.split("/");if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++){var o=r[e];if(!new RegExp(o).test(t[e]))return!1}return!0}parseParam(e){var t,e=e.split(" ");if(1<=e.length)return t=e[0],e=e[1].split("/")[0].replace("type:",""),this.routeStructure.push(t),this.getRegexForType(e)}getRegexForType(e){switch(e){case"string":return"([\\w\\d\\-_]+)";case"number":return"([0-9]+)";case"boolean":return"true|false";default:return console.warn(`Unrecognized type: ${e}. Using default (.*)`),"(.*)"}}paramExtractor(e){if(this.match(e)){var t={},r=hashUrl.replace(/\/$/,"").split("/"),o=this.routeStructure.join("").split("/");for(let e=0;e<r.length;e++)o[e].includes(":")&&(t[o[e].replace(":","").trim()]=r[e]);return t}return!1}}class _Fo_Component{debug=_Fa_DebugHelper.debugReference("_Fo_Component");constructor({node:e,options:t}){if(this.node=e,this.options=t,!this.node?.isFoComponent){this.node.isFoComponent=!0,this.configureComponent();t=_Fa_getTag({node:this.node,tagname:"children"});if(null==t)throw new Error("No children detected on data-stand-alone-component "+e);this.debug("info","_Fo_Component configured, initializing parsing and placeholder interpretation."),this.children=t,this.parseComponent(),this.buildComponent(),this.node.querySelector("getComponent")&&this.HandleGetComponentTag()}}static keyword={component:"stand-alone","event-handler":"lone-event"};parseComponent(){this.parseToCommonHTML(),this.parseComponentPlaceholder()}parseComponentPlaceholder(e=this.node){this.debug("info","==> Begin parsing by DFS on _Fo_Component "+this.node.nodeName),_Fa_DFSHelper({node:e,predicates:[(e,t)=>{t?.getAttribute&&(this.debug("debug","==> Parsing by DFS, current node "+t.nodeName),t.innerHTML=new _Fo_Component_PlaceholderParser({nodeOrigin:this.node,node:t,content:t.innerHTML}),this.debug("debug","==> Parsing by DFS, current result "+this.node.innerHTML))},(e,t)=>{if(0<t?.childNodes?.length&&(!t.hasAttribute(_Fo_Component.keyword.component)||t===this.node))return[...t.childNodes]}]}),this.debug("info","==> Parsing by DFS ended on _Fo_Component "+this.node.nodeName)}buildComponent(){this.traverseAndSetPseudoEvent(),this.debug("info","Binding MutationObserver on "+this.node.nodeName),this.node.addEventListener("node-builded",()=>{new MutationObserver(()=>{this.debug("info",`Mutation detected in _Fo_Component ${this.node.nodeName}, re-executing traverseAndSetPseudoEvent.`),this.traverseAndSetPseudoEvent(this.childNodes)}).observe(this.node,{childList:!0,subtree:!0})},{once:!0}),this.node.dispatchEvent(new CustomEvent("node-builded"))}parseToCommonHTML(){this.debug("info",`Parsing _Fo_Component ${this.node.nodeName} to Common HTML`);var e=this.children.cloneNode(!0),e=Array.from(e.childNodes);this.node.innerHTML="",e.forEach(e=>this.node.appendChild(e)),this.debug("success",`Parsing _Fo_Component ${this.node.nodeName} to Common HTML completed`)}traverseAndSetPseudoEvent(e=this.node){e&&(this.debug("info","==> Begin Event Binding & Ignition of _Fo_Component Children by DFS"),_Fa_DFSHelper({node:e,predicates:[(e,t)=>{t?.getAttribute&&(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"debug",message:"Trying to set pseudo-event on node "+t.nodeName}),t.useAncestorMethod||(t.parentComponentRef=this.node,t.useAncestorEventMethod=_Fa_ParentChildRelationshipHelper_useAncestorEventMethod,t.useAncestorMethod=_Fa_ParentChildRelationshipHelper_useAncestorMethod,t.useAncestorProp=_Fa_ParentChildRelationshipHelper_useAncestorProp),this.setPseudoEvent(t))},(e,t)=>{if(0<t?.childNodes?.length){if(!t.hasAttribute(_Fo_Component.keyword.component)||t===this.node)return[...t.childNodes];setTimeout(()=>{new _Fo_Component({node:t,options:this.options})},500)}}]}),this.debug("success","==> Event Binding & Ignition of _Fo_Component Children by DFS completed"))}setPseudoEvent(n,s=this.node){var e=n?.getAttribute(_Fo_Component.keyword["event-handler"]);e&&(s.loneEvents||(s.loneEvents={},s.loneEventsListened=[]),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"info",message:"=> Valid event props detected, setting events on node "+n.nodeName}),e.split(";").forEach(e=>{let[t,r]=e.split(":");if(t&&r){s.loneEvents[t]||(s.loneEvents[t]=[]);const o=function(e){"function"==typeof s.eventMethods[r.toLowerCase()]?s.eventMethods[r.toLowerCase()].call(this,e):console.error(`Handler function '${r}' not found on node`,n)};s.loneEvents[t].push({node:n,handler:o});["mouseenter","mouseleave","focus","blur","dragenter","dragleave"].includes(t)?n.addEventListener(t,e=>{o.call(n,e)}):s.loneEventsListened.includes(t)||(s.loneEventsListened.push(t),s.addEventListener(t,r=>{var e=s.loneEvents[t];e&&e.forEach(({node:e,handler:t})=>{r.target===e&&t.call(r.target,r)})}))}else _Fa_DebugHelper.debugLogs({ref:this.debug,type:"error",message:`=> Invalid event format for node: ${n.nodeName}. Expected format: "event:handlerName", given: `+e})}),n.removeAttribute(_Fo_Component.keyword["event-handler"]))}async selfHttpHelper({url:e,header:t,method:r="GET"}){return(await fetch(e,{method:r,headers:t})).text()}async HandleGetComponentTag(){const t=[this.node];for(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:"=> Start of HandleGetComponentTag() with queue: "+t});0<t.length;){var r=t.shift();if(r?.nodeName?.match(/getComponent/i)){var o=r.getAttribute("src");_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`<getComponent ...> detected, trying to fetch component, at source "${o}"`});try{var e=await this.selfHttpHelper({url:o}),n=document.createElement("div");for(n.innerHTML=e,_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`fetch success, replacing <getComponent> with: 
"${e}"`});n.firstChild;)r.parentNode.insertBefore(n.firstChild,r);r.parentNode.removeChild(r),Array.from(n.childNodes).forEach(e=>t.push(e))}catch(e){_Fa_DebugHelper.debugLogs({ref:this.debug,type:"error",message:`Failed to load component for node: ${r}. Error: `+e.message});o=document.createComment(`failed to get component at src "${o}"`);r.parentNode.replaceChild(o,r)}}0<r?.childNodes?.length&&Array.from(r.childNodes).forEach(e=>t.push(e)),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`processed node: ${r.nodeName} with children: `+r.childNodes.length}),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:"queue length: "+t.length})}}configureComponent(){new _Fo_Component_Config({node:this.node})}}class _Fo_Component_Config{debug=_Fa_DebugHelper.debugReference("_Fo_Component_Config");constructor({node:e}){_Fa_DebugHelper.debugLogs({ref:this.debug,type:"info",message:"Initializing _Fo_Component_Config..."}),this.node=e,this.getProperty(),this.setProperty(),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"success",message:"Initialization completed for _Fo_Component_Config."})}getTag(e){var t=this.node.querySelector(e);return this.debug("warn",`getTag called for tagname: ${e}, result: ${t?"found":"not found"}.`),t||null}static componentProperty=["props","methods","eventMethods"];componentProperty=_Fo_Component_Config.componentProperty;getProperty(){this.debug("debug","Fetching component properties..."),this.componentProperty.forEach(e=>{var t=_Fa_getTag({node:this.node,tagname:e})?.getAttributeNames()||[];this[e+"Names"]=t,this.node[e]=this.node[e]||{},this.debug("debug",`Property: ${e}, Attributes: ${JSON.stringify(t)}.`)})}setProperty(){this.debug("debug","Setting component properties..."),this.componentProperty.forEach(r=>{this[r+"Names"].forEach(e=>{var t=_Fa_getTag({node:this.node,tagname:r})?.getAttribute(e);this.node[r][e]=this.parseProperty(t),this.debug("debug",`Set property: ${e}, Value: ${t}.`)})})}parseProperty(t){if(t){var e=t.trim(),r=!!e.match(/^{.*}$/),o=!!e.match(/^\s*(.*?)\s*=>\s*\{([\s\S]*?)\}\s*$/),n=!!e.match(/^\[.*\]$/);if(_Fa_DebugHelper.debugLogs({ref:this.debug,type:"debug",message:`Parsing property: ${t}, Detected format: ${r?"JSON":o?"Arrow Function":n?"Array String":"Unknown"}.`}),r)try{return JSON.parse(e)}catch(e){return this.debug("error",`JSON parsing failed for property: ${t}, error: ${e}.`),null}else if(o)try{return new Function("props",`return (${e})(props);`)}catch(e){return this.debug("error",`Arrow function execution failed for property: ${t}, error: ${e}.`),null}else if(n)try{return JSON.parse(e)}catch(e){return this.debug("error",`Array string parsing failed for property: ${t}, error: ${e}.`),null}return this.debug("error",`Invalid property format detected for: ${t}.`),null}}}class _Fo_Component_LifecycleInterpreter{debug=_Fa_DebugHelper.debugReference("_Fo_Component_LifecycleInterpreter");constructor({node:e}){this.debug("info",`Initializing Lifecycle Interpreter for component: ${e.componentName}.`),this.node=e,this.debug("info",`Lifecycle Interpreter initialized for component: ${e.componentName}, with lifecycle: ${e.lifecycle}.`)}lifeCycle=["onMount","onUpdate"];getLifecycleTagInfo(){}}const _Fa_ParentChildRelationshipHelper_useAncestorMethod=function({method:o,skipMatch:e=0,context:n=null}){const s=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorMethod");var t=(e,t,r)=>{_Fa_DebugHelper.debugLogs({ref:s,type:e,message:`Html Element requests access to its _Fo_Component ancestor's method: ${o}, 
context: ${n?"element":"parent"} 
result: `+r})};t("log",0,"initiated");let r=this?.parentComponentRef;for(;r;){if(console.log("current node explored: ",r),r?.methods[o.toLowerCase()]){if(0===e)return t("log",0,"success"),r.methods[o.toLowerCase()].bind(n||r);e--}r=r?.parentComponentRef}return t("error",0,"failed"),null},_Fa_ParentChildRelationshipHelper_useAncestorProp=function({prop:o,skipMatch:e=0,context:t=null}){const n=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorProp");var r=(e,t,r)=>{_Fa_DebugHelper.debugLogs({ref:n,type:e,message:"Html Element requests access to its _Fo_Component ancestor's property: "+o})};r("log");let s=this?.parentComponentRef;for(;s;){if(console.log("current node explored:",s),s?.props[o.toLowerCase()]){if(0===e)return r("log"),"object"==typeof s.props[o.toLowerCase()]?s.props[o.toLowerCase()]:s.props[o.toLowerCase()].bind(t||s);e--}s=s?.parentComponentRef}return r("error"),null},_Fa_ParentChildRelationshipHelper_useAncestorEventMethod=function({eventMethod:o,skipMatch:e=0,context:t=null}){const n=_Fa_DebugHelper.debugReference("_Fa_ParentChildRelationshipHelper_useAncestorEventMethod");var r=(e,t,r)=>{_Fa_DebugHelper.debugLogs({ref:n,type:e,message:"Html Element requests access to its _Fo_Component ancestor's eventMethod: "+o})};r("log");let s=this?.parentComponentRef;for(;s;){if(console.log("current node explored:",s),s?.eventMethods[o.toLowerCase()]){if(0===e)return r("log"),s.eventMethods[o.toLowerCase()].bind(t||s);e--}s=s?.parentComponentRef}return r("error"),null};class _Fo_Component_PlaceholderParser{debug=_Fa_DebugHelper.debugReference("_Fo_Component_PlaceholderParser");constructor({nodeOrigin:t,node:e,content:r}){this.node=e,this.interpreter=e=>new _Fo_Component_PlaceholderReplacer({node:t,content:e}).replacePlaceHolder(),_Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`==> _Fo_Component_PlaceholderParser called for ${e} with content `+r});e=new String(this.placeholderParser(r));return _Fa_DebugHelper.debugLogs({ref:this.debug,type:"log",message:`==> _Fo_Component_PlaceholderParser call result:
 ${e}

result type:`+typeof e}),e}placeholderParser(e){if(""===e.trim)return this.debug("log","==> _Fo_Component_PlaceholderParser placeholderParser called with empty value"),e;var t,e=e.split(/<\/?\w+[^>]*>(?=(?:(?!(?:{{[^}]*}}))<\/?\w+[^>]*>)*$)/g),r=(this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with splitted value ${e} }`),[]),o=[];for(t of e){var n,s=t.trim();/^<\w+[^>]*>$/.test(s)?(r.push(s),n=1===r.length?s.replace(/(="")|(='')/g,"").replace(/(\{\{\s*(.*?)\s*\}\})/g,(e,t)=>{var r=this.interpreter(t.trim());return this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with code ${t}
result: `+r),r}):s,o.push(String(n)),this.isSelfClosing(s)&&r.pop()):/^<\/\w+>$/.test(s)?(r.pop(),o.push(String(s))):/\{\{.*?\}\}/.test(s)&&0===r.length?o.push(String(s.replace(/(\{\{\s*.*?\s*\}\})/g,(e,t)=>{var r=this.interpreter(t.trim());return this.debug("log",`==> _Fo_Component_PlaceholderParser placeholderParser called with code ${t}
result: `+r),r}))):0<s.length&&o.push(String(s))}e=o.join("");return this.debug("debug","Final Processed Output: "+e),e}isSelfClosing(e){return/<\w+[^>]*\/>/.test(e)||/<\s*(img|br|hr|input|meta|link|area|base|col|embed|source|track|wbr|getComponent)\b[^>]*>/i.test(e)}}class _Fo_Component_PlaceholderReplacer{debug=_Fa_DebugHelper.debugReference("_Fo_Component_PlaceholderReplacer");constructor({node:e,content:t}){this.node=e,this.content=t}replacePlaceHolder(){return this.content&&"string"==typeof this.content?(this.debug("debug",`Replacing placeholder in ${this.node.nodeName} with content: `+this.content),this.content.replace(/{{\s*(.*?)\s*}}/g,(r,t)=>{try{var e,o,n,s,i,a;if(t.includes("||"))return[e,o]=t.split("||").map(e=>e.trim()),this.evaluateExpression(e)||this.evaluateExpression(o);if(t.includes("?"))return[n,s]=t.split("?").map(e=>e.trim()),[i,a]=s.split(":").map(e=>e.trim()),this.evaluateExpression(n)?this.evaluateExpression(i):this.evaluateExpression(a);if(t.includes("(")&&t.includes(")")&&!t.trim().startsWith("forDataIn(")){var l=t.match(/(\w+)\((.*?)\)/);if(l){var d,[,c,h]=l,u=this.node.methods[c.toLowerCase()];if(this.debug("debug",`Invoking method ${c} with args: `+(""===h.trim()?"(no argument passed)":h)),"function"==typeof u)return 0<(d=h.split(",").map(e=>this.evaluateExpression(e.trim())))?.length?u():u(...d)}throw new Error(`Method ${t} is not defined or is not a function.`)}if(t.startsWith("forDataIn(")){const r=t.trim().match(/forDataIn\((.+?),\s*['"`](.+?)['"`]\)/);if(r){let[,e,t]=r;var p=this.evaluateExpression(e);if(this.debug("debug",`Invoking forDataIn with data: ${p} and template: `+t),Array.isArray(p))return p.map(r=>t.replace(/value\.(\w+)/g,(e,t)=>r[t]||"")).join("")}throw new Error("Invalid forDataIn expression: "+t)}return this.evaluateExpression(t)}catch(e){return this.debug("error",`Error evaluating placeholder "${t}": `+e.message),""}})):this.content}evaluateExpression(t){try{return new Function("props",`with (props) { return ${t}; }`)(this.node.props)}catch(e){return this.debug("warn",`Error evaluating expression "${t}" : `+e.message),null}}}const _Fa_getTag=({node:e,tagname:t})=>{var r=_Fa_DebugHelper.debugReference("_Fa_getTag"),o=!(!e||!e.querySelector(t));return r(1==o?"log":"warn",`helper func _Fa_getTag called for node "${e.nodeName}", child to find "${t}" 
result: `+(1==o?"found":"not found")),1==o?e.querySelector(t):null},_Fa_DFSHelper=function({node:e,predicates:t}){let r=Array.isArray(e)?[...e]:[e];for(;0<r.length;){const o=r.pop();t.forEach(e=>{e=e(r,o);Array.isArray(e)&&r.push(...e)})}};class _Fo_AppState extends _Fo_UtilityFunc{#state;#accessKey;constructor(){super(),this.#accessKey=Symbol("accessKey");this.#state=new Proxy({},{deleteProperty(e,t,r){throw new Error("Deleting keys is not allowed: "+String(t))},set(e,t,r){return e[t]=r,document.querySelectorAll(`[bind-state="${t}"]`).forEach(e=>{e.textContent=r}),!0}}),foreveralone.on("app:viewChanged",()=>{Object.keys(this.#state).forEach(t=>{document.querySelectorAll(`[bind-state="${t}"]`).forEach(e=>{e.textContent=this.#state[t]||e.getAttribute(t+"-default")||""})})})}bindState(e,t){var r;"string"==typeof e?(r=document.querySelector(e)||document.getElementById(e))?r.setAttribute("bind-state",t):console.error(`Element not found: ${e}, for state binding`):e?.nodeName&&e.setAttribute("bind-state",t)}getAccessKey(){return this.#accessKey}setState(e,t,r){if(r!==this.#accessKey)throw new Error("Unauthorized access: Invalid key.");if("symbol"!=typeof r)throw new Error("Invalid access key type. Must be a symbol.");this.#state[e]=t}getState(e,t,r=void 0){if("symbol"!=typeof t)throw new Error("Invalid access key type. Must be a symbol.");if(t!==this.#accessKey)throw new Error("Unauthorized access: Invalid key.");return void 0!==this.#state[e]?this.#state[e]:r}debugState(e){if(e!==this.#accessKey)throw new Error("Unauthorized access: Invalid key.");return{...this.#state}}syncWithLocalStorage(){var e=this.getAccessKey();localStorage.setItem("appState",JSON.stringify(this.debugState(e)))}loadFromLocalStorage(){const r=this.getAccessKey();var e=JSON.parse(localStorage.getItem("appState")||"{}");Object.entries(e).forEach(([e,t])=>this.setState(e,t,r))}onChange(e){changeHandlers.indexOf(e)||this.changeHandlers.push(e)}setState(t,r,e){super.setState(t,r,e),this.changeHandlers.forEach(e=>e(t,r))}}class _Fo_AppJWT extends _Fo_AppState{constructor(){super(),this.jwt=null}setJWT(e,t){if(t!==this.getAccessKey())throw new Error("Unauthorized access: Invalid key.");this.jwt=e}getJWT(e){if(e!==this.getAccessKey())throw new Error("Unauthorized access: Invalid key.");return this.jwt}isJWTValid(){return!!this.jwt}}class foreveralone extends _Fo_AppJWT{static debug=_Fa_DebugHelper.debugReference("foreveralone");constructor(){super()}}foreveralone.configure=_Fo_AppRouter.configure,foreveralone.init=_Fo_AppRouter.init,foreveralone.use=_Fo_AppRouter.use,foreveralone.registerMethods=_Fo_AppRouter.registeredMethods,foreveralone.extendLifeCycle=_Fo_AppRouter.executeLifeCycle,foreveralone.appVar=_Fo_AppRouter.args,foreveralone.useMiddleware=e=>{if("function"!=typeof e)throw new Error("Invalid middleware: Expected a function.");_Fo_AppRouter.middlewares.push(e)},foreveralone.addRoutes=([{}]=routes)=>{foreveralone.dfs({node:routes,predicates:[e=>{var t;e?.path&&e.key?(t=new _Fo_AppRoute(e),_Fo_AppRouter.addRoute(t)):this.debug("warn","Invalid route: "+JSON.stringify(e))},r=>{if(r?.children){let t=r.children;if(Array.isArray(t))return t=(t=t.filter(e=>!!e.key||(this.debug("warn",`Invalid children: ${JSON.stringify(t)}, skipped in execution`),!1))).map(e=>(e.path||(e.path=r.path),e.key=r.key.replace(/\/$/,"")+"/"+e.key.replace(/^\//,""),e.props={...e?.props,...r?.props},e));this.debug("warn","Invalid children: "+JSON.stringify(t))}}]})};